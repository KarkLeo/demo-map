(this["webpackJsonpmapbox-test"]=this["webpackJsonpmapbox-test"]||[]).push([[0],{128:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),i=n(38),o=n.n(i),a=(n(83),n(84),n(26)),s=n(15);const u=({feature:t,state:e})=>{switch(e){case s.RENDER_STATE.SELECTED:case s.RENDER_STATE.HOVERED:case s.RENDER_STATE.UNCOMMITTED:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:7};default:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:5}}},l=({feature:t,index:e,state:n})=>{switch(n){case s.RENDER_STATE.SELECTED:case s.RENDER_STATE.HOVERED:case s.RENDER_STATE.UNCOMMITTED:case s.RENDER_STATE.CLOSING:return{stroke:"rgb(251, 176, 59)",strokeWidth:2,fill:"rgb(251, 176, 59)",fillOpacity:.3,strokeDasharray:"4,2"};default:return{stroke:"rgb(60, 178, 208)",strokeWidth:2,fill:"rgb(60, 178, 208)",fillOpacity:.1}}};var d=n(6);const p={position:"fixed",top:"20px",right:"20px",display:"flex",flexDirection:"column",gap:"10px"};var b=()=>{const[t,e]=Object(r.useState)(null),[n,c]=Object(r.useState)(null),i=Object(r.useRef)(null),o=Object(r.useCallback)((t=>{c(t&&t.selectedFeatureIndex)}),[]),a=Object(r.useCallback)((({editType:t})=>{"addFeature"===t&&e(new s.EditingMode)}),[]),b=Object(r.useCallback)((()=>{null!==n&&n>=0&&i.current&&i.current.deleteFeatures(n)}),[n]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(s.Editor,{ref:i,style:{width:"100%",height:"100%"},clickRadius:12,mode:t,onSelect:o,onUpdate:a,editHandleShape:"circle",featureStyle:l,editHandleStyle:u,featuresDraggable:!0}),Object(d.jsxs)("div",{style:p,children:[Object(d.jsx)("button",{onClick:()=>e(new s.DrawPolygonMode),children:"New poly"}),Object(d.jsx)("button",{onClick:b,children:"Delete"})]})]})},h=n(30),f=n(22);var j=()=>{const t=Object(h.c)(f.getUserPathSourceSelector);return Object(d.jsx)(a.Source,{id:"my-data",type:"geojson",data:t,children:Object(d.jsx)(a.Layer,{id:"user-path-layer",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f0f","line-width":8}})})};var O=()=>{const t=Object(h.b)(),[e,n]=Object(r.useState)(null);Object(r.useEffect)((()=>{(async()=>{await(async t=>{await navigator.geolocation.watchPosition((e=>{t(e)}),(t=>console.log(t)))})(n)})()}),[n]),Object(r.useEffect)((()=>{e&&t(Object(f.pushPositionAction)(e))}),[e,t])};var S=()=>{const[t,e]=Object(r.useState)({longitude:-91.874,latitude:42.76,zoom:12});return O(),Object(d.jsx)("div",{style:{width:"100vw",height:"100vh"},children:Object(d.jsxs)(a.default,{...t,onClick:t=>console.log(t),width:"100%",height:"100%",mapStyle:"mapbox://styles/kark-leo/ckrq5pa1k7b9j17qr2tvv7ixy",onViewportChange:e,mapboxApiAccessToken:"pk.eyJ1Ijoia2Fyay1sZW8iLCJhIjoiY2tycWswbnF1MDk2ajJ3bzB6eWE5OGgyZSJ9.LOcclpJ7wZ_L-udL_G7JQA",children:[Object(d.jsx)(a.NavigationControl,{}),Object(d.jsx)(b,{}),Object(d.jsx)(j,{})]})})};var g=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(S,{})})};var E=t=>{t&&t instanceof Function&&n.e(3).then(n.bind(null,130)).then((({getCLS:e,getFID:n,getFCP:r,getLCP:c,getTTFB:i})=>{e(t),n(t),r(t),c(t),i(t)}))},y=(n(126),n(42));o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h.a,{store:y.appStore,children:Object(d.jsx)(g,{})})}),document.getElementById("root")),E()},22:function(t,e,n){"use strict";var r=n(67);n.o(r,"getUserPathSourceSelector")&&n.d(e,"getUserPathSourceSelector",(function(){return r.getUserPathSourceSelector})),n.o(r,"initialState")&&n.d(e,"initialState",(function(){return r.initialState})),n.o(r,"pushPositionAction")&&n.d(e,"pushPositionAction",(function(){return r.pushPositionAction})),n.o(r,"userPathReducer")&&n.d(e,"userPathReducer",(function(){return r.userPathReducer}));var c=n(68);n.d(e,"initialState",(function(){return c.a}));var i=n(39);n.d(e,"userPathReducer",(function(){return i.b}));var o=n(69);n.d(e,"pushPositionAction",(function(){return o.a}));var a=n(70);n.d(e,"getUserPathSourceSelector",(function(){return a.a}))},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return i}));var r=n(22);const c="USER_PATH/PUSH__POSITION",i=(t=r.initialState,e)=>{switch(e.type){case c:return{...t,path:[...t.path,e.position]};default:return t}}},42:function(t,e,n){"use strict";var r=n(71);n.d(e,"appReducer",(function(){return r.a}));var c=n(72);n.d(e,"appStore",(function(){return c.a}));n(73)},67:function(t,e){},68:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={path:[]}},69:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(39);const c=t=>({type:r.a,position:t})},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(77);const c=Object(r.a)((t=>t.userPath.path),(t=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.map((t=>[t.coords.longitude,t.coords.latitude]))}})))},71:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(32),c=n(22);const i=Object(r.combineReducers)({userPath:c.userPathReducer})},72:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(32),c=n(78),i=n(42);const o=Object(r.createStore)(i.appReducer,Object(c.composeWithDevTools)())},73:function(t,e){},83:function(t,e,n){},84:function(t,e,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.2285dda0.chunk.js.map