(this["webpackJsonpmapbox-test"]=this["webpackJsonpmapbox-test"]||[]).push([[0],{126:function(t,e,n){},129:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),c=n(38),o=n.n(c),a=(n(83),n(84),n(26)),s=n(15);const u=({feature:t,state:e})=>{switch(e){case s.RENDER_STATE.SELECTED:case s.RENDER_STATE.HOVERED:case s.RENDER_STATE.UNCOMMITTED:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:7};default:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:5}}},l=({feature:t,index:e,state:n})=>{switch(n){case s.RENDER_STATE.SELECTED:case s.RENDER_STATE.HOVERED:case s.RENDER_STATE.UNCOMMITTED:case s.RENDER_STATE.CLOSING:return{stroke:"rgb(251, 176, 59)",strokeWidth:2,fill:"rgb(251, 176, 59)",fillOpacity:.3,strokeDasharray:"4,2"};default:return{stroke:"rgb(60, 178, 208)",strokeWidth:2,fill:"rgb(60, 178, 208)",fillOpacity:.1}}};var d=n(6);const p={position:"fixed",top:"20px",right:"20px",display:"flex",flexDirection:"column",gap:"10px"};var b=()=>{const[t,e]=Object(r.useState)(null),[n,i]=Object(r.useState)(null),c=Object(r.useRef)(null),o=Object(r.useCallback)((t=>{i(t&&t.selectedFeatureIndex)}),[]),a=Object(r.useCallback)((({editType:t})=>{"addFeature"===t&&e(new s.EditingMode)}),[]),b=Object(r.useCallback)((()=>{null!==n&&n>=0&&c.current&&c.current.deleteFeatures(n)}),[n]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(s.Editor,{ref:c,style:{width:"100%",height:"100%"},clickRadius:12,mode:t,onSelect:o,onUpdate:a,editHandleShape:"circle",featureStyle:l,editHandleStyle:u,featuresDraggable:!0}),Object(d.jsxs)("div",{style:p,children:[Object(d.jsx)("button",{onClick:()=>e(new s.DrawPolygonMode),children:"New poly"}),Object(d.jsx)("button",{onClick:b,children:"Delete"})]})]})},j=n(30),h=n(22);var f=()=>{const t=Object(j.c)(h.getUserPathSourceSelector);return Object(d.jsx)(a.Source,{id:"my-data",type:"geojson",data:t,children:Object(d.jsx)(a.Layer,{id:"user-path-layer",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f0f","line-width":8}})})};var O=t=>{const e=Object(j.b)(),[n,i]=Object(r.useState)(null);Object(r.useEffect)((()=>{(async()=>{await(async t=>{await navigator.geolocation.watchPosition((e=>{t(e)}),(t=>console.log(t)),{enableHighAccuracy:!0,maximumAge:5e3})})(t?e=>{i(e),e&&t(e)}:i)})()}),[i,t]),Object(r.useEffect)((()=>{n&&e(Object(h.pushPositionAction)(n))}),[n,e])};n(126);var g=({viewport:{longitude:t,latitude:e,zoom:n}})=>Object(d.jsxs)("div",{className:"viewport-info",children:[Object(d.jsxs)("span",{className:"viewport-info__item",children:["longitude: ",t.toFixed(4)]}),Object(d.jsxs)("span",{className:"viewport-info__item",children:["latitude: ",e.toFixed(4)]}),Object(d.jsxs)("span",{className:"viewport-info__item",children:["zoom: ",n.toFixed(4)]})]});var S=()=>{const[t,e]=Object(r.useState)({longitude:-91.874,latitude:42.76,zoom:12}),n=Object(r.useCallback)((n=>{e({...t,latitude:n.coords.latitude,longitude:n.coords.longitude})}),[t,e]);return O(n),Object(d.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[Object(d.jsxs)(a.default,{...t,onClick:t=>console.log(t),width:"100%",height:"100%",mapStyle:"mapbox://styles/kark-leo/ckrq5pa1k7b9j17qr2tvv7ixy",onViewportChange:e,mapboxApiAccessToken:"pk.eyJ1Ijoia2Fyay1sZW8iLCJhIjoiY2tycTVqeDF5MDRmaDJucHF6bjl0aWRlMSJ9.fVvoRu7-JIUyyIkbFQ9vQA",children:[Object(d.jsx)(a.NavigationControl,{}),Object(d.jsx)(b,{}),Object(d.jsx)(f,{})]}),Object(d.jsx)(g,{viewport:t})]})};var v=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(S,{})})};var x=t=>{t&&t instanceof Function&&n.e(3).then(n.bind(null,131)).then((({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:c})=>{e(t),n(t),r(t),i(t),c(t)}))},E=(n(127),n(42));o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(j.a,{store:E.appStore,children:Object(d.jsx)(v,{})})}),document.getElementById("root")),x()},22:function(t,e,n){"use strict";var r=n(67);n.o(r,"getUserPathSourceSelector")&&n.d(e,"getUserPathSourceSelector",(function(){return r.getUserPathSourceSelector})),n.o(r,"initialState")&&n.d(e,"initialState",(function(){return r.initialState})),n.o(r,"pushPositionAction")&&n.d(e,"pushPositionAction",(function(){return r.pushPositionAction})),n.o(r,"userPathReducer")&&n.d(e,"userPathReducer",(function(){return r.userPathReducer}));var i=n(68);n.d(e,"initialState",(function(){return i.a}));var c=n(39);n.d(e,"userPathReducer",(function(){return c.b}));var o=n(69);n.d(e,"pushPositionAction",(function(){return o.a}));var a=n(70);n.d(e,"getUserPathSourceSelector",(function(){return a.a}))},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c}));var r=n(22);const i="USER_PATH/PUSH__POSITION",c=(t=r.initialState,e)=>{switch(e.type){case i:return{...t,path:[...t.path,e.position]};default:return t}}},42:function(t,e,n){"use strict";var r=n(71);n.d(e,"appReducer",(function(){return r.a}));var i=n(72);n.d(e,"appStore",(function(){return i.a}));n(73)},67:function(t,e){},68:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={path:[]}},69:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(39);const i=t=>({type:r.a,position:t})},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(77);const i=Object(r.a)((t=>t.userPath.path),(t=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.map((t=>[t.coords.longitude,t.coords.latitude]))}})))},71:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(32),i=n(22);const c=Object(r.combineReducers)({userPath:i.userPathReducer})},72:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(32),i=n(78),c=n(42);const o=Object(r.createStore)(c.appReducer,Object(i.composeWithDevTools)())},73:function(t,e){},83:function(t,e,n){},84:function(t,e,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.05b2ba25.chunk.js.map